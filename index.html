<!DOCTYPE html>
<html>
  <head>

  </head>
  <body>
    <div style="text-align: center; padding-top: 150px">
      <canvas id="main"></canvas>
    </div>
    <script type="text/javascript">
      class Game {
        constructor(config) {
          this.canvas = config.canvas;
          this.gridWidth = config.gridWidth || 50;
          this.padding = config.padding || 20;
          this.lines = config.lines || 19;

          this.width = (this.lines - 1) * this.gridWidth + this.padding * 2;
          this.height = this.width;
          this.ctx = this.canvas.getContext('2d');
          this.init();
          this.step = 0;
        }

        init() {
          this.canvas.width = this.width;
          this.canvas.height = this.height;
          var ctx = this.ctx;
          // 绘制底盘
          ctx.fillStyle = '#DCB35C';
          ctx.fillRect(0, 0, this.width, this.height);

          // 绘制纵横线
          ctx.strokeStyle = "#000000";
          ctx.beginPath();
          for (var i = 0; i < this.lines; i++) {
            ctx.moveTo(0 + this.padding, this.gridWidth * i + this.padding);
            ctx.lineTo(this.gridWidth * (this.lines - 1) + this.padding, this.gridWidth * i + this.padding);
          }

          for (var i = 0; i < this.lines; i++) {
            ctx.moveTo(this.gridWidth * i + this.padding, 0 + this.padding);
            ctx.lineTo(this.gridWidth * i + this.padding, this.gridWidth * (this.lines - 1) + this.padding);
          }

          ctx.closePath();
          ctx.stroke();

          // 绘制九星
          ctx.fillStyle = '#000000';
          for (var i = 0; i < 3; i++) {
            for (var j = 0; j < 3; j++) {
              ctx.beginPath();
              ctx.arc((6 * (i + 1) - 3) * this.gridWidth + this.padding, (6 * (j + 1) - 3) * this.gridWidth + this.padding, 5, 0, Math.PI * 2, true);
              ctx.fill();
            }
          }
        }

        play(x, y, color) {
          this.step++;
          var ctx = this.ctx;
          ctx.fillStyle = color === 'black' ? '#000000' : '#ffffff';
          // 绘制一颗黑棋
          ctx.beginPath();
          var _x = (x - 1) * this.gridWidth + this.padding;
          var _y = (y - 1) * this.gridWidth + this.padding;
          ctx.arc(_x, _y, this.gridWidth / 2 - 1, 0, Math.PI * 2, true);
          ctx.fill();
          ctx.font = `${Math.ceil(this.gridWidth / 3) + 1}px Monaco`;
          ctx.textAlign = 'center';
          ctx.textBaseline = 'middle';
          ctx.fillStyle = color === 'black' ? '#ffffff' : '#000000';
          ctx.fillText(this.step, _x, _y);
        }
      }

      var game = new Game({
        canvas: document.getElementById('main'),
        padding: 20,
        gridWidth: 50
      });

      game.play(4, 4, 'black');
      game.play(4, 17, 'white');
    </script>
  </body>
</html>
